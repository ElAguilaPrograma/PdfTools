<div class="card flex justify-center">
    <p-dialog 
        [modal]="true" 
        [(visible)]="visible"
        (onHide)="updateVisibleValue(false) ; updateIsOrderingValue(false)" 
        (onShow)="updateVisibleValue(true) ; updateIsOrderingValue(isOrdering)"
        closable="false"
        [style]="{ width: '60rem' }"     
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">

        <ng-template pTemplate="header">
            <div class="flex justify-between p-4 w-full">
                <h2 class="text-2xl font-semibold">{{ header }}</h2>
                <input #fileInput 
                    type="file"
                    [multiple]="multipleFiles"
                    (change)="onFileSelected($event)"
                    hidden />

                    <div class="relative">
                        @if (canOrder){
                            @if (isOrdering){
                                <p-button label="Order"
                                    size="small"
                                    icon="pi pi-sort-alt"
                                    [raised]="true"
                                    variant="outlined"
                                    severity="success"
                                    (click)="updateIsOrderingValue(false) ; messageDesactiveOrder()"
                                />
                            }
                            @else {
                                <p-button label="Order"
                                    size="small"
                                    icon="pi pi-sort-alt"
                                    [raised]="true"
                                    variant="outlined"
                                    severity="secondary"
                                    (click)="updateIsOrderingValue(true) ; messageActiveOrder()"
                                />
                            }
                        }

                        <p-button label="Add"
                            size="small"
                            icon="pi pi-plus"
                            [raised]="true"
                            variant="outlined"
                            severity="contrast"
                            (onClick)="fileInput.click()"
                            class="ml-4"
                        />
                    </div>
            </div>
        </ng-template>

        <ng-content>
            
        </ng-content>

        <ng-template pTemplate="footer">
            <div class="flex justify-end w-full mt-4">
                <p-button label="Cancel" 
                    severity="danger" 
                    (click)="closeModalWindow($event)" 
                    variant="outlined"
                />
                <p-button label="Send" 
                    severity="primary"  
                    class="ml-4"
                    (click)="sendFiles()"
                    pTooltip="Send files"
                    showDelay="700" 
                />
            </div>
        </ng-template>
    </p-dialog>
</div>
